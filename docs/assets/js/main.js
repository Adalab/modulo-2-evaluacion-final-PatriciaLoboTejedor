"use strict";const form=document.querySelector(".js-form"),inputSearch=document.querySelector(".js-inputText"),inputButton=document.querySelector(".js-inputButton"),favoritesList=document.querySelector(".js-favoritesList"),showsList=document.querySelector(".js-showsList"),buttonRemoveAll=document.querySelector(".js-buttonRemoveAll");let searchText="";const imgDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=Show";let arrayData=[],arrayFavoriteShows=[];function handleSubmit(e){e.preventDefault()}function getShows(){searchText=inputSearch.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+searchText).then(e=>e.json()).then(e=>{arrayData=e,renderShows(arrayData)})}function renderShows(){let e="";for(const t of arrayData){e+=void 0!==arrayFavoriteShows.find(e=>e.show.id===t.show.id)?`<li id="${t.show.id}" class="main__shows_list-li js-showCard favorites">`:`<li id="${t.show.id}" class="main__shows_list-li js-showCard">`,e+=`<h3 class="main__shows_list-li--title">${t.show.name}</h3>`,null===t.show.image?e+=`<img src="${imgDefault}" alt="${t.show.name}">`:e+=`<img src="${t.show.image.medium}" alt="${t.show.name}">`,e+="</li>"}showsList.innerHTML=e,addListenersToShows()}function addListenersToShows(){const e=document.querySelectorAll(".js-showCard");for(const t of e)t.addEventListener("click",handleFavoriteClickCard)}function handleFavoriteClickCard(e){const t=e.currentTarget,o=parseInt(t.id),a=arrayData.find(e=>e.show.id===o);void 0===arrayFavoriteShows.find(e=>e.show.id===o)?arrayFavoriteShows.push(a):arrayFavoriteShows=arrayFavoriteShows.filter(e=>e.show.id!==o),renderFavoriteShows(),renderShows(),setInLocalStorage()}function renderFavoriteShows(){let e="";for(const t of arrayFavoriteShows)e+=`<li id="${t.show.id}" class="favorite-card js-showFavoriteCard">`,e+=`<h3 class="favorite-card_title">${t.show.name}</h3>`,null===t.show.image?e+=`<img src="${imgDefault}" alt="${t.show.name}">`:e+=`<img src="${t.show.image.medium}" alt="${t.show.name}">`,e+=`<input class="favorite-card_input js-showCard" type="button" value="x"  id="${t.show.id}" />`,e+="</li>";favoritesList.innerHTML=e,addListenersToFavoriteShows()}function setInLocalStorage(){localStorage.setItem("favoritesShows",JSON.stringify(arrayFavoriteShows))}function getFavoriteShows(){arrayFavoriteShows=JSON.parse(localStorage.getItem("favoritesShows")),renderFavoriteShows(),renderShows()}function addListenersToFavoriteShows(){const e=document.querySelectorAll(".js-buttonRemove");for(const t of e)t.addEventListener("click",handleFavoriteClickCard)}function handleRemoveAllFavorites(){arrayFavoriteShows=[],localStorage.removeItem("favoritesShows"),renderFavoriteShows(),renderShows()}form.addEventListener("submit",handleSubmit),null!==localStorage.getItem("favoritesShows")&&getFavoriteShows(),inputButton.addEventListener("click",getShows),form.addEventListener("submit",getShows),buttonRemoveAll.addEventListener("click",handleRemoveAllFavorites);