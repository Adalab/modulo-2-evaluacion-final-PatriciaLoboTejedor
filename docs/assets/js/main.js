"use strict";console.log(">> 1,2,3 - Ready :)");const form=document.querySelector(".js-form"),inputSearch=document.querySelector(".js-inputText"),inputButton=document.querySelector(".js-inputButton"),favoritesList=document.querySelector(".js-favoritesList"),showsList=document.querySelector(".js-showsList"),buttonRemoveAll=document.querySelector(".js-buttonRemoveAll");let searchText="";const imgDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=Show";let arrayData=[],arrayFavoriteShows=[];function handleSubmit(e){e.preventDefault()}function getShows(){searchText=inputSearch.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+searchText).then(e=>e.json()).then(e=>{arrayData=e,renderShows(arrayData)})}function renderShows(){let e="";for(const o of arrayData){e+=void 0!==arrayFavoriteShows.find(e=>e.show.id===o.show.id)?`<li id="${o.show.id}" class="js-showCard favorites">`:`<li id="${o.show.id}" class="js-showCard">`,e+=`<h3>${o.show.name}</h3>`,null===o.show.image?e+=`<img src="${imgDefault}" alt="${o.show.name}">`:e+=`<img src="${o.show.image.medium}" alt="${o.show.name}">`,e+="</li>"}showsList.innerHTML=e,addListenersToShows()}function addListenersToShows(){const e=document.querySelectorAll(".js-showCard");for(const o of e)o.addEventListener("click",handleFavoriteClickCard)}function handleFavoriteClickCard(e){const o=e.currentTarget,t=parseInt(o.id),a=arrayData.find(e=>e.show.id===t);void 0===arrayFavoriteShows.find(e=>e.show.id===a.show.id)?arrayFavoriteShows.push(a):arrayFavoriteShows=arrayFavoriteShows.filter(e=>e.show.id!==a.show.id),renderFavoriteShows(),renderShows(),setInLocalStorage()}function renderFavoriteShows(){let e="";for(const o of arrayFavoriteShows)e+=`<li id="${o.show.id}" class="js-showFavoriteCard">`,e+=`<h3>${o.show.name}</h3>`,null===o.show.image?e+=`<img src="${imgDefault}" alt="${o.show.name}">`:e+=`<img src="${o.show.image.medium}" alt="${o.show.name}">`,e+=`<input class="js-showCard" type="button" value="X"  id="${o.show.id}" />`,e+="</li>";e+="</ul>",favoritesList.innerHTML=e,addListenersToFavoriteShows()}function setInLocalStorage(){localStorage.setItem("favoritesShows",JSON.stringify(arrayFavoriteShows))}function getFavoriteShows(){arrayFavoriteShows=JSON.parse(localStorage.getItem("favoritesShows")),renderFavoriteShows()}function addListenersToFavoriteShows(){const e=document.querySelectorAll(".js-buttonRemove");for(const o of e)o.addEventListener("click",handleFavoriteClickCard)}function handleRemoveAllFavorites(){arrayFavoriteShows=[],renderFavoriteShows(),renderShows(),localStorage.clear("favoritesShows")}form.addEventListener("submit",handleSubmit),null===localStorage.getItem("favoritesShows")?getShows():getFavoriteShows(),inputButton.addEventListener("click",getShows),buttonRemoveAll.addEventListener("click",handleRemoveAllFavorites);